fix Seeders unit test to use generators API

From: evansde77 <evansde77@gmail.com>


---
 src/python/WMCore/WMSpec/Seeders/SeederManager.py  |    6 +++---
 .../WMCore_t/WMSpec_t/Seeders_t/Seeders_t.py       |   16 +++++++++-------
 2 files changed, 12 insertions(+), 10 deletions(-)

diff --git a/src/python/WMCore/WMSpec/Seeders/SeederManager.py b/src/python/WMCore/WMSpec/Seeders/SeederManager.py
index 4f6293b..62af4cd 100644
--- a/src/python/WMCore/WMSpec/Seeders/SeederManager.py
+++ b/src/python/WMCore/WMSpec/Seeders/SeederManager.py
@@ -25,15 +25,15 @@ class SeederManager:
         if not hasattr(task, 'data'):
             #We don't have a WMTask
             return
-        if not hasattr(task.data, 'seeders'):
+        if not hasattr(task.data, 'generators'):
             #We have a blank task with no seeders
             return
         #Otherwise we have a fully formed task of some type
 
         configList = task.listGenerators()
 
-        for seederName in configList:
-            self.addSeeder(seederName, task.getGeneratorSettings(seederName))
+        for seeder in configList:
+            self.addSeeder(seeder, **task.getGeneratorSettings(seeder))
 
 
         return
diff --git a/test/python/WMCore_t/WMSpec_t/Seeders_t/Seeders_t.py b/test/python/WMCore_t/WMSpec_t/Seeders_t/Seeders_t.py
index 2d629a7..62632f8 100644
--- a/test/python/WMCore_t/WMSpec_t/Seeders_t/Seeders_t.py
+++ b/test/python/WMCore_t/WMSpec_t/Seeders_t/Seeders_t.py
@@ -70,14 +70,15 @@ class SeederTest(unittest.TestCase):
         """
         fileset1 = Fileset(name='EventBasedFiles1')
         for i in range(0, 100):
-            fileset1.addFile(
-            File("/store/MultipleFileSplit%s.root" % i, # lfn
+            f = File("/store/MultipleFileSplit%s.root" % i, # lfn
                  1000,   # size
                  100,   # events
                  10 + i, # run
                  12312   # lumi
                  )
-            )
+            f['locations'].add("BULLSHIT")
+
+            fileset1.addFile(f            )
 
         work = Workflow()
         subscription1 = Subscription(
@@ -140,8 +141,8 @@ class SeederTest(unittest.TestCase):
         randomDict = {"generator.initialSeed": None, "evtgenproducer.initialSeed": None, "MAXINT": 10000}
         lumiDict   = {"lumi_per_run": 5}
 
-        task1.addSeeder("RandomSeeder", randomDict)
-        task1.addSeeder("RunAndLumiSeeder", lumiDict)
+        task1.addGenerator("RandomSeeder", **randomDict)
+        task1.addGenerator("RunAndLumiSeeder", **lumiDict)
 
         manager = SeederManager(task = task1)
 
@@ -178,10 +179,11 @@ class SeederTest(unittest.TestCase):
         task1 = makeWMTask("task2")
 
         seederDict = {"generator.initialSeed": 1001, "evtgenproducer.initialSeed": 1001}
-        task1.addSeeder("PresetSeeder", seederDict)
-
+        task1.addGenerator("PresetSeeder", **seederDict)
+        
         manager = SeederManager(task = task1)
 
+
         jobs = self.oneHundredFiles()
 
         for jobGrp in jobs:
