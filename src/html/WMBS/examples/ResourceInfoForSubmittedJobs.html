<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Resource Info</title>

<!-- YAHOO YUI Library -->
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.8.0r4/build/fonts/fonts-min.css" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.8.0r4/build/paginator/assets/skins/sam/paginator.css" />
<link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.8.0r4/build/datatable/assets/skins/sam/datatable.css" />
<!--
<script type="text/javascript" src="http://yui.yahooapis.com/combo?2.8.0r4/build/yahoo-dom-event/yahoo-dom-event.js&2.8.0r4/build/connection/connection-min.js&2.8.0r4/build/datasource/datasource-min.js&2.8.0r4/build/datatable/datatable-min.js&2.8.0r4/build/json/json-min.js"></script>
-->

<script src="http://yui.yahooapis.com/2.8.0r4/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script src="http://yui.yahooapis.com/2.8.0r4/build/dragdrop/dragdrop-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.0r4/build/connection/connection-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.0r4/build/element/element-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.0r4/build/datasource/datasource-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.0r4/build/datatable/datatable-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.0r4/build/json/json-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.8.0r4/build/paginator/paginator-min.js"></script> 

<!-- WebTools library -->
<script src="../javascript/namespace.js"></script>
<script src="../javascript/dataTable.js"></script>
</head>
<body class="yui-skin-sam">
<div id="resourceInfo"></div>
<script type="text/javascript">

    var dataSchema = {
        resultsList: 'results',
        fields: [
                 {key: "site"}, 
                 {key: "['data'][0]['type']"},
                 {key: "['data'][0]['max_slots']", label: "threshold"}, 
                 {key: "['data'][0]['task_running_jobs']", label: "running"},

                 {key: "['data'][1]['type']"},
                 {key: "['data'][1]['max_slots']", label: "threshold"}, 
                 {key: "['data'][1]['task_running_jobs']", label: "running"},

                 {key: "['data'][2]['type']"},
                 {key: "['data'][2]['max_slots']", label: "threshold"}, 
                 {key: "['data'][2]['task_running_jobs']", label: "running"},

                 {key: "['data'][3]['type']"},
                 {key: "['data'][3]['max_slots']", label: "threshold"}, 
                 {key: "['data'][3]['task_running_jobs']", label: "running"},

                 {key: "['data'][4]['type']"},
                 {key: "['data'][4]['max_slots']", label: "threshold"}, 
                 {key: "['data'][4]['task_running_jobs']", label: "running"},
                 //common number
                 {key: "['data'][0]['total_running_jobs']", label: "running"},
                 {key: "['data'][0]['total_slots']", label: "slots"}
                ] 
        };


    var tableDef = [
                 {key: "site"}, 
                 {label: "Job Type",  children:[
                   {label: "Processing", children: [
                        //{key: "['data'][2]['type']"},
                        {key: "['data'][2]['max_slots']", label: "threshold"}, 
                        {key: "['data'][2]['task_running_jobs']", label: "running"}
                        ]
                   },

                   {label: "Merge", children: [
                        //{key: "['data'][1]['type']"},
                        {key: "['data'][1]['max_slots']", label: "threshold"}, 
                        {key: "['data'][1]['task_running_jobs']", label: "running"}
                        ]
                   },

                   {label: "Skim", children: [
                        //{key: "['data'][0]['type']"},
                        {key: "['data'][0]['max_slots']", label: "threshold"}, 
                        {key: "['data'][0]['task_running_jobs']", label: "running"}
                        ]
                   },

                   {label: "LogCollect", children: [
                        //{key: "['data'][4]['type']"},
                        {key: "['data'][4]['max_slots']", label: "threshold"}, 
                        {key: "['data'][4]['task_running_jobs']", label: "running"}
                        ]
                   },

                   {label: "CleanUp", children: [
                        //{key: "['data'][3]['type']"},
                        {key: "['data'][3]['max_slots']", label: "threshold"}, 
                        {key: "['data'][3]['task_running_jobs']", label: "running"}
                        ]
                   },

                  
                  ]}, 

                //common number.
                 {label: "Total", children: [
                        {key: "['data'][0]['total_slots']", label: "slots"},
                        {key: "['data'][0]['total_running_jobs']", label: "running"}
                       ]
                 }
                ]
				
var dataUrl = "/wmbs/listthresholdsforsubmit"

var dataSource = WMCore.createDataSource(dataUrl, dataSchema)
dataSource.responseType = YAHOO.util.DataSource.TYPE_JSON
var dataTable = WMCore.createDataTable("resourceInfo", dataSource, 
                             tableDef,
                             WMCore.createDefaultTableConfig(), 100000)

</script>
</body>
</html>