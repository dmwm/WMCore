<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title> Job Requests </title>

<!--CSS file (default YUI Sam Skin) -->
<link type="text/css" rel="stylesheet" href="http://yui.yahooapis.com/2.9.0/build/datatable/assets/skins/sam/datatable.css">
 
<!-- Dependencies -->
<script src="http://yui.yahooapis.com/2.9.0/build/yahoo-dom-event/yahoo-dom-event.js"></script>
<script src="http://yui.yahooapis.com/2.9.0/build/element/element-min.js"></script>
<script src="http://yui.yahooapis.com/2.9.0/build/datasource/datasource-min.js"></script>
<script type="text/javascript" src="http://yui.yahooapis.com/2.9.0/build/datatable/datatable-min.js"></script>
<script src="http://yui.yahooapis.com/2.9.0/build/paginator/paginator-min.js"></script>
<script src="http://yui.yahooapis.com/2.8.0r4/build/connection/connection-min.js"></script>
</head>

<body class="yui-skin-sam">


<div id="tableContainer"></div>

<script  type="text/javascript">

var dataSource = new YAHOO.util.XHRDataSource('http://cms-xen41.fnal.gov:5984/reqmgr_workload_cache/_design/ReqMgr/_list/requests/all');
dataSource.responseType = YAHOO.util.DataSource.TYPE_JSARRAY;
//Always send accept type as application/json
YAHOO.util.Connect.initHeader("Accept", "application/json", true);


dataSource.responseSchema = {
    fields: [
        { key: 'RequestName'}, { key: 'Group'}, { key: 'Requestor'}, 
        { key: 'RequestType'}, { key: 'Request Priority'},  { key: 'RequestStatus'}
    ]
};
 
var columnDefs = [
        { key: 'RequestName', label: 'Name', sortable:true}, 
        { key: 'Group', sortable:true}, 
        { key: 'Requestor', sortable:true},
        { key: 'RequestType', label: 'Type', sortable:true}, 
        { key: 'RequestPriority', label: 'RequestPriority', sortable:true}, 
        { key: 'RequestStatus', label: 'Status', sortable:true}
];
 
var oConfigs = { 
           paginator: new YAHOO.widget.Paginator({ rowsPerPage: 50 })
         }

var yahooTable = new YAHOO.widget.DataTable("tableContainer", columnDefs, dataSource, oConfigs);
 
</script>

</body>
</html>

